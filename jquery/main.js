/**
        * requestAnimationFrame shim
        * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
        * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
        * requestAnimationFrame polyfill by Erik MÃ¶ller. fixes from Paul Irish and Tino Zijdel
        * MIT license
        */

var __extends;define("core/logger",["require","exports"],function(){var t;return function(t){function e(){var t,e=[];for(t=0;t<arguments.length-0;t++)e[t]=arguments[t+0];r.push(e),window.console&&window.console.log&&s&&window.console.log(Array.prototype.slice.call(e))}function o(){return r}function i(){for(var t in r)r.hasOwnProperty(t)&&window.console.log(r[t])}function n(t){if(t===!0){if(window&&window.console){window.debug_log.hasOwnProperty("ogLog")||(window.debug_log.ogLog=window.console.log);var e=window.console.log;window.console.log=function(){var t,o=new Error;return o&&o.stack?(t=[].slice.apply(arguments).concat(["\n	"+o.stack.split(/\n/)[3].trim()]),e.apply(this,t)):e(arguments)}}}else window.debug_log.hasOwnProperty("ogLog")&&(window.console.log=window.debug_log.ogLog)}var a,r=[],s=$(document.body).attr("data-debug")?"true"===$(document.body).attr("data-debug")?!0:!1:!1,l=$(document.body).attr("data-debug-lines")?"true"===$(document.body).attr("data-debug-lines")?!0:!1:!1,d=0;t.log=e,t.getHistory=o,t.printHistory=i,function(t){function o(){return u?(ga?(e("Analytics : init : UA-58463-9"),ga("create","UA-58463-9","auto"),ga("send","pageview"),r()):e("Analytics : init - no ga!"),void(h=!0)):void e("Analytics : IS_ENABLED is false, not init'ing")}function i(t,i,n,a){if(u){if(h||o(),e("Analytics : track",t,i,n,a),"boolean"==typeof a&&a===!0&&n){var r=encodeURIComponent(t+i+n),s=c[r];c.hasOwnProperty(r)?(s=parseInt(s,10)+1,a=s):(c[r]=1,a=1)}e("Analytics : track variables",t,i,n,a),ga&&t&&i&&(n&&a?ga("send","event",t,i,n,a):n&&!a?ga("send","event",t,i,n):ga("send","event",t,i))}}function n(){u&&(h||o(),ga&&(e("Analytics : pageview",window.location),ga("send","pageview")))}function a(){return r()}function r(){u&&$("[data-analytics]").not("[data-analytics-count]").on("click",s).attr("data-analytics-count",0)}function s(t){var o=$(t.currentTarget),n=parseInt(o.attr("data-analytics-count"),10),a=(o.attr("data-analytics")||"").replace(/\n/g," ").split("|"),r=!1;switch(n+=1,a.length){default:e("Analytics : Fragment click has less than two or more than four tracking parameters",t.currentTarget,a),r=!0;break;case 2:i(a[0],a[1]);break;case 3:i(a[0],a[1],a[2]);break;case 4:i(a[0],a[1],a[2],n)}r||o.attr("data-analytics-count",n)}function l(t,e,o,n){return d+=1,i("dev","error",e+o+(o?" - "+o+(n?" - "+n:""):""),d),!1}var c={},u=("true"===$(document.body).attr("data-enable-analytics")?!0:!1)||!1,h=!1;t.init=o,t.track=i,t.pageview=n,t.refresh=a,t.bindClickFragments=r,t.onFragmentClick=s,t.logError=l}(t.Analytics||(t.Analytics={})),a=t.Analytics,window.debug_log=window.debug_log||{printHistory:i,historyLog:r,force:function(t,e){"undefined"==typeof e&&(e=!1),s=t,e===!0&&t===!0?n(e):(t===!1||e===!1)&&n(!1)}},window.onerror=function(t,e,o,i,n){return a.logError(t,e,o,i,n)},n(l),e("Logger : Constructor")}(t||(t={})),t}),define("core/walt",["require","exports","core/logger"],function(t,e,o){var i,n;!function(t){var e,o;!function(t){function e(t,e,o){var i,n,a=parseFloat(o);return 1/0===a||-1>=a||isNaN(a)?-1:(i=parseFloat(t),t.indexOf("ms")>0||t.indexOf("ms")<0&&t.indexOf("s")<0||t.indexOf("s")>0&&(i*=1e3),n=parseFloat(e),e.indexOf("ms")>0||e.indexOf("ms")<0&&e.indexOf("s")<0||e.indexOf("s")>0&&(n*=1e3),parseInt(i,10)+parseInt(n,10))}t.realAnimTime=e}(t.Math||(t.Math={})),e=t.Math,function(t){function e(){var t,e,o=document.body||document.documentElement,i=o.style,n="animation";if("string"==typeof i[n])return!0;for(t=["moz","Moz","webkit","Webkit","ms","Ms"],n=n.charAt(0).toUpperCase()+n.substr(1),e=0;e<t.length;e++)if("string"==typeof i[t[e]+n])return!0;return!1}function o(t,e){var o=i("delay",t.delay?t.delay:e.delay),a=i("duration",t.duration?t.duration:e.duration),r=i("direction",t.direction?t.direction:e.direction),s=i("iteration-count",t.count?t.count:e.count),l=i("fill-mode",t.fill?t.fill:e.fill),d=i("timing-function",t.timing?t.timing:e.timing);return n(o,a,r,s,l,d)}function i(t,e){var o,i,n;for("fill-mode"!==t&&"direction"!==t&&"timing-function"!==t&&e.indexOf("s")<0&&e.indexOf("ms")<0&&(e+="ms"),o={},i=["moz","webkit","ms"],o["animation-"+t]=e,n=0;n<i.length;n++)o["-"+i[n]+"-animation-"+t]=e;return o}function n(){var t,e,o,i,n,a=[];for(t=0;t<arguments.length-0;t++)a[t]=arguments[t+0];for(e={},i=0;i<a.length;i++){o=a[i];for(n in o)o.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=o[n])}return e}t.supportsAnimations=e,t.createCSS=o}(t.CSS||(t.CSS={})),o=t.CSS}(i||(i={})),function(t){function e(){return d}function n(e){var o,i,n,r;return e.hasOwnProperty("el")?(o=e.el instanceof $?e.el:$(e.el),e.hasOwnProperty("animation")&&""!==e.animation?(i=l.CSS.createCSS(e,t.DEFAULTS),e.hasOwnProperty("onBefore")&&e.onBefore(o),n=c.hasClass("no-focus"),navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<=-1&&(n=!1),!d||n?e.hasOwnProperty("fallback")?e.fallback(o,function(){return a(o,e)}):(o.addClass(n?"walt-animate "+e.animation:"walt-animate"),a(o,e)):o.on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(){return a(o,e)}).css(i).addClass("walt-animate "+e.animation),void(e.hasOwnProperty("useTimeout")&&e.useTimeout===!0&&(r=l.Math.realAnimTime(e.duration||t.DEFAULTS.duration,e.delay||t.DEFAULTS.delay,e.count||t.DEFAULTS.count),r>=0&&window.setTimeout(function(){return a(o,e)},1.15*r)))):void console.warn("Walt - no Animation provided in animate")):void console.warn("Walt - no El provided in animate")}function a(t,e){t.off("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd"),t.hasClass("walt-animate")&&(t.removeClass("walt-animate").removeClass(e.animation),e.hasOwnProperty("onComplete")&&e.onComplete(t))}function r(){function t(t){var i="no-focus",n="in-focus",a={focus:i,focusin:i,pageshow:i,blur:n,focusout:n,pagehide:n};t=t||window.event,t.type in a?(e.removeClass(i+" "+n),e.addClass(a[t.type])):(e.removeClass(i+" "+n),e.addClass(this[o]?i:n))}var e,o;"ontouchstart"in window||(e=$(document.body),o="hidden",o in document?document.addEventListener("visibilitychange",t):(o="mozHidden")in document?document.addEventListener("mozvisibilitychange",t):(o="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",t):(o="msHidden")in document?document.addEventListener("msvisibilitychange",t):"onfocusin"in document?document.onfocusin=document.onfocusout=t:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t)}var s=o.log,l=i,d=l.CSS.supportsAnimations(),c=$(document.body);t.DEFAULTS={el:$(document.body||document.documentElement),animation:"",delay:"0s",duration:"1s",count:"0",fill:"both",direction:"normal",timing:"ease",useTimeout:!1},t.supportsAnimations=e,t.animate=n,r(),s("Walt : Constructor")}(e.Walt||(e.Walt={})),n=e.Walt}),define("core/windowController",["require","exports","core/logger"],function(t,e,o){var i;return function(t){function e(){p("WindowController : init"),i(),n(),v=b=!0,a()}function i(){f.on("scroll",function(){v=!0}),f[0].onorientationchange=function(){b=!0,v=!0},f[0].orientationchange=function(){b=!0,v=!0},f.on("resize",function(){"ontouchstart"in window&&v?(v=!0,b=!0):(b=!0,v=!0)})}function n(){var t,e=0,o=["ms","moz","webkit","o"];for(t=0;t<o.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[o[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[t]+"CancelAnimationFrame"]||window[o[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var o=+new Date,i=Math.max(0,16-(o-e)),n=window.setTimeout(function(){t(o+i)},i);return e=o+i,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}function a(){r(),window.requestAnimationFrame(a)}function r(t){if(t||b||v){if(_=null,T=null,C=f.scrollTop(),k=f.width(),x=f.height(),S=k*x,!t&&m===C&&y===S)return void(v=b=!1);for(var e=w.length;e>0;--e)_=w[e-1],T=_.type,"scroll"===T&&(t||v&&C!==m)?_.fn.apply(_.context,[C,k,x]):"resize"===T&&(t||b&&S!==y)&&_.fn.apply(_.context,[C,k,x]);(t||m!==C)&&(m=C),(t||y!==S)&&(y=S),v=b=!1}}function s(t,e,o){var i=(+new Date+99999*Math.random()).toFixed(0);return p("WindowController : bind",t,o,i),w.push({type:t,fn:e,context:o,id:i}),h&&clearTimeout(h),h=setTimeout(function(){r(!0)},g),i}function l(t,e,o){return s(t,e,o)}function d(t){var e,o;if("undefined"!=typeof t){for(o=w.length;o>0;--o)if(e=w[o-1],e.id===t)return w.splice(o-1,1),p("WindowController : unbind",!0),!0;return p("WindowController : unbind",!1,t,w),!1}}function c(t){return d(t)}function u(t){switch(p("WindowController : trigger",t),t){case"resize":b=!0;break;case"scroll":v=!0}r(!0)}var h,p=o.log,f=$(window),w=[],g=100,m=-1,y=-1,v=!1,b=!1,_=null,C=null,k=null,x=null,T=null,S=null;t.init=e,t.bind=s,t.on=l,t.unbind=d,t.off=c,t.trigger=u,p("WindowController : Constructor")}(i||(i={})),i}),define("core/kiu",["require","exports","core/logger","core/walt","core/windowController"],function(t,e,o,i,n){var a;return function(t){function e(){A("Kiu : onPageInit"),c(),a(),r(),this.hasWait=!1}function a(){A("Kiu : fixWidows");var t;$('[data-kiu*="widows"]').each(function(e,o){t=$(o),t.html(t.html().trim().replace(/\s(?=[^\s]*$)/g,"&nbsp;"))})}function r(){if(R&&!(L.width()>640)){var t;$('[data-kiu*="ampersand"]').each(function(e,o){t=$(o),t.html(t.html().replace(/and/gi,"&amp;"))})}}function s(t){var e,o;b.each(function(i,n){if(m=$(n),S=m.attr("data-proportions-mobile")||m.attr("data-mobile-proportions")||"auto",P=m.attr("data-proportions-tablet")||m.attr("data-tablet-proportions")||"auto",T=m.attr("data-proportions-desktop")||m.attr("data-desktop-proportions")||m.attr("data-proportions")||"auto",T&&""!==T||(T="auto"),E=m.attr("data-proportions-lead")||"width",S&&""!==S&&640>=t&&(T=S),P&&""!==P&&t>640&&1024>=t&&(T=P),"auto"!==T)if("width"===E?(e="height",o=m.width()):(e="width",o=m.height()),T&&"square"!==T){if(T.indexOf(":")>0){var a=T.split(":");m[e](D(parseInt(a[1],10)*o/parseInt(a[0],10))+"px")}}else m[e](D(o)+"px");else m.attr("style")&&/height:.*?;|width:.*?;/g.test(m.attr("style"))&&m.attr("style",m.attr("style").replace(/height:.*?;|width:.*?;/g,""))})}function l(){for(var t=W.length;t>0;--t)n.unbind(W.pop())}function d(){var t,e,o,i,a,r;W.push(n.on("resize",w,this)),R||$("html").hasClass("ie")?(e=L.scrollTop()+L.height(),o=$("html").hasClass("ie"),$('[data-kiu*="scroll-in-view"]').each(function(i,n){t=$(n),t.offset().top<=e&&!o?O.animate({el:t.attr("data-kiu",null).css("visibility","visible").attr("data-kiu-scroll","in-view"),animation:"fadeIn"+(t.attr("data-scroll-direction")||"Up"),delay:.1*(i+1)+"s",duration:"0.5s"}):t.attr("data-kiu",null).css("visibility","visible").attr("data-kiu-scroll","in-view")}),$("[data-kiu-wait]").each(function(e,o){t=$(o),t.attr("data-kiu-scroll","in-view").attr("data-kiu-wait",null).attr("style",t.attr("data-style")).css("visibility","visible")}),C.each(function(e,o){t=$(o),i=t.attr("data-mobile-image")||!1,a=t.attr("data-tablet-image")||!1,r=t.attr("data-desktop-image")||!1,t.css("background-image",'url("'+(i?i:a?a:r)+'")')}),s(L.width())):(_=$('[data-kiu*="scroll-in-view"]').not("[data-kiu-scroll]"),W.push(n.on("scroll",g,this)))}function c(){_=$('[data-kiu*="scroll-in-view"]').not("[data-kiu-scroll]"),b=$('[data-kiu*="keep-proportions"]'),C=$('[data-kiu*="mobile-switch"]'),x=$('[data-kiu*="match-height"]'),k=$('[data-kiu*="match-margins"]'),l(),d()}function u(t,e){if(k.length){var o;k.each(function(t,i){o=$(i),o.attr("data-margin").indexOf("tablet")>=0&&e>640&&1024>=e||o.attr("data-margin").indexOf("mobile")>=0&&640>=e||o.attr("data-margin").indexOf("desktop")>=0?o[0].style.setProperty&&o[0].style.setProperty("margin-top",parseFloat(o.attr("data-margin-percent"))/100*e+"px","important"):o.attr("style")&&""!==o.attr("style")&&o.attr("style",o.attr("style").replace(/margin-top:.*?;/g,""))})}}function h(t,e){var o,i,n,a;x.length&&(o="desktop",e>640&&1024>=e?o="tablet":640>=e&&(o="mobile"),x.each(function(t,e){i=$(e),a=i.attr("data-match-"+o),a&&""!==a&&(n=$('[data-kiu-match="'+a+'"]'),n.length?n.height()>i.height()?i.height(n.height()):n.height(i.height()):(n.attr("style")&&n.attr("style",n.attr("style").replace(/height:.*?;/g,"")),i.attr("style")&&i.attr("style",i.attr("style").replace(/height:.*?;/g,""))))}))}function p(){var t=$(document.body);window.location.hash.indexOf("uÉ¹oqÊsÉ¹Ä±É")>=0&&t.css({"-webkit-transform":"rotateZ(-180deg)","-moz-transform":"rotateZ(-180deg)",transform:"rotateZ(-180deg)"}),Konami&&new Konami(function(){if(!("ontouchstart"in window||$("html").hasClass("ie"))){$("#toasty").length||(t.append($('<audio src="/assets/sounds/toasty.mp3" id="toasty" preload="auto"></audio>')),t.append($('<div style="display:none; background-image:url(\'/assets/images/temp/heads/dan.png\');" class="hide-on-mobile" id="toasty-graphic"></div>')));var e=$("#toasty");e.unbind().on("ended",function(){$("#toasty-graphic").removeClass("is-toasty"),setTimeout(function(){$("#toasty-graphic").css("background-image","url('/work/heads/"+ +new Date+"')")},200)}),e[0].play&&e[0].play(),$("#toasty-graphic").show().addClass("is-toasty"),I.track("dev","nothing to see here","Toasty!",!0)}})}function f(t,e){var o,i,n,a,r,s;C.length&&(s="desktop",e>640&&1024>=e?s="tablet":640>=e&&(s="mobile"),C.each(function(t,e){o=$(e),i=o.attr("data-kiu-mode")?o.attr("data-kiu-mode"):"",i!==s&&(n=o.attr("data-mobile-image")||!1,a=o.attr("data-tablet-image")||!1,r=o.attr("data-desktop-image")||!1,"mobile"===s?o.css("background-image",'url("'+(n?n:a?a:r)+'")'):"tablet"===s?o.css("background-image",'url("'+(a?a:r)+'")'):"desktop"===s&&o.css("background-image",'url("'+(r?r:"")+'")'),o.attr("data-kiu-mode",s))}))}function w(t,e,o){f(t,e,o),s(e),h(t,e,o),u(t,e,o)}function g(t,e,o){R&&L.width()<=640||(_.each(function(e,i){m=$(i),y=m.attr("data-kiu-wait")?!0:!1,(y||!m.attr("data-kiu-scroll"))&&(v=m.offset().top,y&&v>0&&t+1.5*o>=v?m.attr("data-kiu-scroll","in-view").attr("data-kiu-wait",null).attr("style",m.attr("style")+";"+m.attr("data-style")).css("visibility","visible"):!y&&v>0&&t+.9*o>=v&&O.animate({el:m.attr("data-kiu-scroll","in-view").attr("data-kiu-wait",null).css("visibility","visible").show(),animation:"fadeIn"+(m.attr("data-scroll-direction")||"Up"),delay:.1*(e+1)+"s",duration:"0.5s"}))}),_=$('[data-kiu*="scroll-in-view"]').not("[data-kiu-scroll]"))}var m,y,v,b,_,C,k,x,T,S,P,E,A=o.log,I=o.Analytics,O=i.Walt,W=[],L=$(window),R="ontouchstart"in window||/iPhone|iPod|Android|BlackBerry/.test(navigator.userAgent),D=Math.floor;t.onPageInit=e,t.fixWidows=a,t.convertAmpersands=r,t.keepProportions=s,t.updateLists=c,t.detectMobileDesktop=f,p(),A("Kiu : Constructor")}(a||(a={})),a}),define("core/pushState",["require","exports","core/logger","core/factory","core/kiu","core/walt"],function(t,e,o,i,n,a){var r;return function(t){function e(t){var e=this;_("PushState : init"),this.gatherCss(),this.$container=$(t?t:document.body),this.PUSH_HISTORY=[encodeURIComponent(window.location.href)],this.lastTop=0,this.Walt=a.Walt,this.PUSH_CACHE={},this.Factory=i.Factory,this.bindLinks(),window.fb_push_state=window.fb_push_state||{addHistory:function(t){return e.addHistory(t)}}}function r(t){var e=encodeURIComponent(t);this.PUSH_HISTORY[this.PUSH_HISTORY.length-1]!==e&&this.PUSH_HISTORY.push(e)}function s(t){var e=this;window.history&&window.history.pushState&&(t&&t.length?t.find("a").not("[data-push]").attr("data-push","true").on("click",function(t){return e.handleLink(t)}):$("a").not("[data-push]").attr("data-push","true").on("click",function(t){return e.handleLink(t)}))}function l(t,e){var o=this;window.history&&window.history.pushState&&(!t.attr("data-push")||e)&&t.attr("data-push","true").unbind().on("click",function(t){return o.handleLink(t)})}function d(t){t&&(this.$tempLink&&this.$tempLink.remove&&this.$tempLink.remove(),this.$tempLink=$('<a href="'+t+'"></a>'),this.bindLink(this.$tempLink,!0),this.$tempLink[0].click())}function c(){var t=this;window.onpopstate=function(e){e.preventDefault();var o,i="";return t.PUSH_HISTORY.length>1&&(o=decodeURIComponent(t.PUSH_HISTORY.pop())),t.load(i=decodeURIComponent(t.PUSH_HISTORY[t.PUSH_HISTORY.length-1]),t.lastTop),window.history.pushState({url:i},"",i),!1}}function u(t){t||(t=$("#the-content"));var e,o=$("head").find("#mobile-css"),i=$("head"),n=function(t){setTimeout(function(){t.empty().unbind().remove()},25)};t.find('[rel="stylesheet"]').each(function(t,a){return e=$(a),i.find('[rel="stylesheet"][href="'+e.attr("href")+'"]').length?void e.remove():(o.before(e.clone()),void n(e))})}function h(t){var e=$(t.currentTarget),o=e.attr("href"),i="ontouchstart"in window||/iPhone|iPod|Android|BlackBerry/.test(navigator.userAgent);if(0!==o.indexOf("#")){if(window.location.href===o||window.location.href===o+"/"||0===o.indexOf("tel:")&&!i)return void t.preventDefault();if(o.indexOf(window.location.host)<0&&o.indexOf("/")>0)return void e.unbind().attr("target","_blank");t.preventDefault(),this.load(o)}}function p(){this.REQUEST&&this.REQUEST.abort&&this.REQUEST.abort()}function f(t,e){var o,i;this.REQUEST&&this.REQUEST.abort&&this.REQUEST.abort(),o=encodeURIComponent(t),$("html").addClass("is-loading"),i=this,i.PUSH_CACHE.hasOwnProperty(o)?i._onSuccess(i.PUSH_CACHE[o],t,e):($("#loading").width("0%").text("").show(),setTimeout(function(){$("#loading").width(Math.floor(20*Math.random())+1+"%")},100),i.REQUEST=$.ajax({url:t,xhrFields:{onprogress:function(t){if("100%"!==$("#loading").width())if(t.lengthComputable)$("#loading").width(t.loaded/t.total*100+"%");else{var e=$("#loading").width();$("#loading").width(e+e/2+"%")}}}}).error(function(t,e,o){return i._onError(t,e,o)}).success(function(o){return i._onSuccess(o,t,e)}),i.bindBackButton())}function w(t,e,o){var i,n,a,r,s,l,d,c;this.lastTop=$(window).scrollTop(),i=encodeURIComponent(e),this.PUSH_HISTORY[this.PUSH_HISTORY.length-1]!==i&&this.PUSH_HISTORY.push(i),n=$(t),a=$(document.createElement("div")).append(t),n=a.find("#the-content"),this.changeTitle(a),r=e.replace(window.location.host,"").replace(window.location.protocol+"//",""),""===r&&(r=e),window.history.pushState({url:r},"",r),e&&!this.PUSH_CACHE.hasOwnProperty(i)&&(this.PUSH_CACHE[i]=t),s=this,l=n.find('[rel="stylesheet"]'),l.length?(d=0,l.each(function(t,e){c=$(e),$.ajax({url:c.attr("href")}).done(function(){d++,d===l.length&&(s.updateHeaderNav(),s.replaceContent(n,o))})})):setTimeout(function(){s.updateHeaderNav(),s.replaceContent(n,o)},50)}function g(){var t,e,o,i,n,a=window.location.href.replace(window.location.host,"").replace(window.location.protocol+"//","");a.split("/").length-1>=2&&(a=a.slice(0,a.lastIndexOf("/")+1)),a=a.replace(/\//g,""),a.indexOf("work")>=0?a="work":a.indexOf("about")>=0?a="about":a.indexOf("news")>=0?a="news":a.indexOf("careers")>=0?a="careers":a.indexOf("contact")>=0&&(a="contact"),t=$(".header-mobile__list-item"),t.removeClass("is-active"),a&&""!==a&&"/"!==a&&t.find('a[href*="'+a+'"]').closest(".header-mobile__list-item").addClass("is-active"),("about"===a||"work"===a)&&(e=$(".header-mobile__sub-item"),e.removeClass("is-active"),o=window.location.href.replace(window.location.host,"").replace(window.location.protocol,"").replace("//",""),e.find('a[href*="'+o+'"]').closest(".header-mobile__sub-item").addClass("is-active")),i=$(".header-nav__list-item"),i.removeClass("is-active"),a&&""!==a&&"/"!==a&&i.find('a[href*="'+a+'"]').closest(".header-nav__list-item").addClass("is-active"),n=$(".footer-links__item"),n.removeClass("is-active"),a&&""!==a&&"/"!==a?n.find('a[href*="'+a+'"]').closest(".footer-links__item").addClass("is-active"):n.first().addClass("is-active")}function m(t,e,o){var i,n;_("PushState _onError",t,e,o),$("html").removeClass("is-loading"),i=!0,"Not Found"===o?$("#loading").text("Sorry! That page appears to be missing.").width("100%"):"abort"===o?($("#loading").text("").hide(),i=!1):(n="Sorry! That link appears to be broken"+(""!==o?"- "+o:""),window.navigator.hasOwnProperty("onLine")&&!window.navigator.onLine&&(n="Error! It looks like you might not be online."),$("#loading").text(n).width("100%")),i&&setTimeout(function(){$("#loading").fadeOut(function(){$("#loading").css("width","0%")})},5e3)}function y(t){var e=t.find("title");e&&e.length&&($("title").html(e.html()),C.pageview())}function v(){var t=this.lastTop;return delete this.lastTop,t}function b(t,e){var o,i,a,r,s=this.$container.find("#the-content"),l=this;$("a").blur(),this.gatherCss(t),$("#loading").width("100%"),this.Factory.removeWidgets(s),o=s,i=t.find("[data-push-keep]"),a=s.find("[data-push-keep]"),i.length&&a.attr("data-push-keep")===i.attr("data-push-keep")&&("collapse-nav"===i.attr("data-widget")&&(i.attr("data-collapse-intro","false"),i.attr("class",a.attr("class"))),o=s.find("section").first(),s=s.not(o)),$("html").hasClass("has-sidebar")&&(r=$('[data-widget="mobile-navtoggle"]').data("fb-widget"),r&&r.onMenuEvent&&r.onMenuEvent({},!0)),this.Walt.animate({el:o,animation:"fadeOut",duration:"300ms",onComplete:function(){"undefined"==typeof e?/Android/.test(navigator.userAgent)?$("html,body").animate({scrollTop:0},10):$("html,body").scrollTop(0):"undefined"!=typeof e&&(/Android/.test(navigator.userAgent)?$("html,body").animate({scrollTop:e},10):$("html,body").scrollTop(e)),$("#loading").fadeOut(function(){$("#loading").css("width","0%")}),s.find("*").unbind().empty().remove(),s.html(t.html()),n.detectMobileDesktop(k.scrollTop(),k.width(),k.height()),l.Walt.animate({el:s,animation:"fadeIn",duration:"500ms",delay:"100ms",onBefore:function(){l.Factory.refresh(),l.bindLinks(),C.refresh(),$("html").removeClass("is-loading")}})}})}var _=o.log,C=o.Analytics,k=$(window);t.init=e,t.addHistory=r,t.bindLinks=s,t.bindLink=l,t.gotoURL=d,t.bindBackButton=c,t.gatherCss=u,t.handleLink=h,t.abort=p,t.load=f,t._onSuccess=w,t.updateHeaderNav=g,t._onError=m,t.changeTitle=y,t.getLastTop=v,t.replaceContent=b,_("PushState : Constructor")}(r||(r={})),r}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("core/base",["require","exports","core/logger","core/windowController","core/walt","core/pushState","core/kiu"],function(t,e,o,i,n,a,r){var s,l,d=function(){function t(){this.log=o.log,this.Analytics=o.Analytics}return t}();e.Loggable=d,s=function(t){function e(e){t.call(this),this.$html=$("html"),this.$window=$(window),this.$body=$(document.body),this.WindowController=i,this.WINDOW_BINDINGS=[],this.Walt=n.Walt,this.PushState=a,this.Kiu=r,e&&e.length&&(this.$root=e)}return __extends(e,t),e.prototype.unbindWindow=function(){for(var t=this.WINDOW_BINDINGS.length;t>0;--t)this.WindowController.unbind(this.WINDOW_BINDINGS.pop())},e.prototype.bindWindowEvent=function(t,e){this.WINDOW_BINDINGS.push(this.WindowController.on(t,e,this))},e.prototype.dispose=function(){this.unbindWindow()},e}(d),e.FbObject=s,l=function(t){function e(e){t.call(this,e),this.EVENT_BINDINGS={}}return __extends(e,t),e.prototype.bind=function(t,e){this.EVENT_BINDINGS.hasOwnProperty(t)?this.EVENT_BINDINGS[t].push(e):this.EVENT_BINDINGS[t]=[e]},e.prototype.on=function(t,e){return this.bind(t,e)},e.prototype.onEvents=function(t,e){if(this.EVENT_BINDINGS.hasOwnProperty(t))for(var o=0;o<this.EVENT_BINDINGS[t].length;o++)this.EVENT_BINDINGS[t][o](e)},e.prototype.emit=function(t,e){return this.onEvents(t,e)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this&&this.$root&&(this.$root.find("*").unbind(),this.$root.unbind())},e}(s),e.Widget=l}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/carousel/giantCarousel",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._root=e,this.log("GiantCarousel : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t,e=this;return e.log("GiantCarousel : init"),e.$root.find(".giant-carousel__list-item").length<=0?(e.log("GiantCarousel : No items (.giant-carousel__list-item)"),void e.$root.hide()):(t=e.$root.find(".giant-carousel__caption-container"),t.hide(),e.autoSpeed=parseFloat(e.$root.attr("data-gc-timer"))||500,e.setSplashSize(e.$window.scrollTop(),e.$window.width(),e.$window.height()),e.bindWindowEvent("resize",e.setSplashSize),e.Walt.animate({el:t.show(),animation:"fadeInUpBig",duration:"0.5s"}),1===e.$root.find(".giant-carousel__list-item").length?(e.$root.addClass("no-pagination"),e.$root.find(".giant-carousel__pagination").css("display","none !important"),void e.$root.find(".giant-carousel__list-item").first().addClass("is-active")):(e.setupPagination(),void e.beginAutoPlay()))},e.prototype.beginAutoPlay=function(){var t=this;"no"!==this.$root.attr("data-carousel-autoplay")&&this.$root.find(".giant-carousel__list-item").length>1&&(this.autoTimer=window.setInterval(function(){return t.autoSlide()},this.autoSpeed))},e.prototype.autoSlide=function(){this.onPaginationClick(null,"auto")},e.prototype.setSplashSize=function(t,e,o){var i=/iPhone|iPod|Android|BlackBerry/.test(navigator.userAgent),n=0,a=this.$root.attr("data-proportions-desktop")&&"auto"!==this.$root.attr("data-proportions-desktop")?!0:!1;a||(n=o-$(".title-nav").outerHeight()-this.$root.find(".giant-carousel__caption-link").outerHeight()+1,this.$root.find(".giant-carousel__list").css("height",n+"px")),this.updatePaginationPosition(i,e)},e.prototype.updateContent=function(t){var e=this,o=e.$root.find(".giant-carousel__caption-container"),i=o.find(".giant-carousel__caption"),n=t.find(".giant-carousel__item-caption").text(),a=t.find(".giant-carousel__item-link");i.addClass("walt-progress"),e.Walt.animate({el:i.show(),animation:"slideOutDown",duration:"0.5s",onComplete:function(){i.addClass("walt-progress").hide().text(n),o.find(".giant-carousel__caption-link, .giant-carousel__caption-link-cover").text(a.text()).attr("href",a.attr("href")).attr("data-push",null),e.PushState.bindLinks(),e.Walt.animate({el:i.show(),animation:"slideInUp",duration:"0.5s",onComplete:function(){i.removeClass("walt-progress")}})}})},e.prototype.setupPagination=function(){var t=this.$root.find(".giant-carousel__pagination-text"),e=this.$root.find(".giant-carousel__list-item").length;return e?(t.html("1 / "+e).attr("data-slides",e),this.updateContent(this.$root.find(".giant-carousel__list-item").first().addClass("is-active")),void this.bindPaginationButtons()):void this.$root.find(".giant-carousel__pagination").hide()},e.prototype.updatePaginationPosition=function(t,e){this.$root.hasClass("is-index")&&(t||640>=e)?this.$root.find(".giant-carousel__pagination").css("top",(this.$root.find(".giant-carousel__list-item.is-active").height()-60)/2+"px"):this.$root.find(".giant-carousel__pagination").css("top",this.$root.find(".giant-carousel__list-item.is-active").height()/2-10+"px")},e.prototype.updatePagination=function(t){var e=this.$root.find(".giant-carousel__pagination-text");e.html(t+(e.attr("data-slides")?" / "+e.attr("data-slides"):""))},e.prototype.bindPaginationButtons=function(){var t=this,e=this.$root.find(".giant-carousel__pagination-buttons");e.find("a.giant-carousel__pagination-prev").unbind().on("click touchstart",function(e){return t.onPaginationClick(e,"prev")}),e.find("a.giant-carousel__pagination-next").unbind().on("click touchstart",function(e){return t.onPaginationClick(e,"next")})},e.prototype.onPaginationClick=function(t,e){var o,i,n,a;if(t&&t.preventDefault&&t.preventDefault(),o=this,!(o.Walt.supportsAnimations()&&o.$root.find('[class*="walt-"]').length||"auto"===e&&!o.$root.is(":in-viewport"))){if(o.autoTimer&&"auto"!==e&&window.clearInterval(o.autoTimer),"auto"===e&&(e="next"),i=o.$root.find(".giant-carousel__list-item.is-active"),n="next"===e?i.next(".giant-carousel__list-item"):i.prev(".giant-carousel__list-item"),!n.length&&(n="next"===e?o.$root.find(".giant-carousel__list-item").first():o.$root.find(".giant-carousel__list-item").last(),!n.length))return void console.warn("GiantCarousel - no next item");a=parseInt(i.css("z-index"),0),a>150&&(a=10,i.css("z-index",a)),n.css("z-index",a+10),o.updatePagination(n.index()+1),o.updateContent(n),o.Walt.animate({el:i.css("display","block"),animation:"wipeOut"+("next"===e?"Up":"Down"),duration:"0.5s",onBefore:function(t){/iPhone|iPod|Android|BlackBerry/.test(navigator.userAgent)||t.css("background-size","cover")},onComplete:function(t){/iPhone|iPod|Android|BlackBerry/.test(navigator.userAgent)||t.css("background-size","cover"),i.removeClass("is-active").hide(),n.addClass("is-active").show()}}),o.Walt.animate({el:n.show().addClass("is-active"),animation:"slideIn"+("next"===e?"Up":"Down"),duration:"0.5s"})}},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.autoTimer&&window.clearInterval(this.autoTimer)},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/work/exploreCarousel",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._root=e,this.log("ExploreCarousel : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("ExploreCarousel : init"),t.autoSpeed=parseFloat(t.$root.attr("data-slide-timer"))||500,t.$root.find(".explore-carousel__slide").length&&(t.bindPagination(),t.$root.css("background-image","url("+t.$root.find(".explore-carousel__slide.is-active").find(".bg > img").attr("src")+")"),t.hasShown=!1,t.$root.find(".explore-carousel__slide.is-active").hasClass("is-light")?t.$root.find(".explore-carousel__pagination").removeClass("is-dark").addClass("is-light"):t.$root.find(".explore-carousel__pagination").removeClass("is-light").addClass("is-dark"),t.bindWindow())},e.prototype.beginAutoPlay=function(){var t=this;this.$root.find(".explore-carousel__slide").length<=1||(this.autoTimer=window.setInterval(function(){return t.autoSlide()},this.autoSpeed))},e.prototype.autoSlide=function(){this.onPaginationClick(null,"auto")},e.prototype.bindWindow=function(){/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent)?(this.hasShown=!0,this.animateSlideEntrance(this.$root.find(".explore-carousel__slide.is-active").index())):this.bindWindowEvent("scroll",this.onScrollEvent),this.bindWindowEvent("resize",this.onWindowResize)},e.prototype.onScrollEvent=function(t,e,o){!this.hasShown&&t>=this.$root.offset().top-.75*o&&(this.hasShown=!0,this.animateSlideEntrance(this.$root.find(".explore-carousel__slide.is-active").index()),this.beginAutoPlay())},e.prototype.animateSlideEntrance=function(t,e){var o,i=this,n=i.$root.find(".explore-carousel__slide").eq(t),a=n.find("[data-entrance]").length,r=0;n.find("[data-entrance]").sort(function(t,e){return $(e).hasClass("bg")}).each(function(t,n){o=$(n),i.Walt.animate({el:o.show(),animation:o.attr("data-entrance")||"fadeIn",delay:o.attr("data-entrance-delay")||150*(t+1)+"ms",duration:o.attr("data-entrance-duration")||"0.2s",onComplete:function(){r++,r===a-1&&e&&e()},useTimeout:!0})})},e.prototype.animateSlideExit=function(t,e){var o,i=this,n=i.$root.find(".explore-carousel__slide").eq(t),a=n.find("[data-exit]").length,r=0;n.find("[data-exit]").sort(function(t,e){return $(e).hasClass(".bg")}).each(function(t,n){o=$(n),i.Walt.animate({el:o.show(),animation:o.attr("data-exit")||"fadeOut",delay:o.attr("data-exit-delay")||150*(t+1)+"ms",duration:o.attr("data-exit-duration")||"0.2s",onComplete:function(t){t.hide(),r++,r===a-1&&e&&e()},useTimeout:!0})})},e.prototype.onWindowResize=function(t,e){this.$root.css("height",Math.floor(1080*e/1920)+"px"),this.$root.css({padding:this.$root.height()/4+"px 0"})},e.prototype.bindPagination=function(){var t=this;return t.$root.find(".explore-carousel__slide").length<=1?void t.$root.find(".explore-carousel__pagination").hide():(t.$root.find(".explore-carousel__pagination-prev").unbind().on("click touchstart",function(e){return t.onPaginationClick(e,"prev")}),t.$root.find(".explore-carousel__pagination-next").unbind().on("click touchstart",function(e){return t.onPaginationClick(e,"next")
}),void t.$root.find(".explore-carousel__pagination-text").html("<span>1</span> / "+t.$root.find(".explore-carousel__slide").length))},e.prototype.onPaginationClick=function(t,e){var o,i,n,a,r;t&&t.preventDefault&&t.preventDefault(),o=this,o.$root.find('[class*="walt-"]').length||("auto"!==e||o.$root.is(":in-viewport"))&&("auto"!==e&&o.autoTimer&&window.clearInterval(o.autoTimer),i=o.$root.find(".explore-carousel__slide.is-active"),n=i.index(),a="next"===e||"auto"===e?i.next(".explore-carousel__slide"):i.prev(".explore-carousel__slide"),a.length||(a="prev"===e?o.$root.find(".explore-carousel__slide").last():o.$root.find(".explore-carousel__slide").first()),r=a.index(),o.animateSlideExit(n,function(){i.removeClass("is-active"),a.addClass("is-active"),a.hasClass("is-light")?o.$root.find(".explore-carousel__pagination").removeClass("is-dark").addClass("is-light"):o.$root.find(".explore-carousel__pagination").removeClass("is-light").addClass("is-dark"),o.$root.find(".explore-carousel__pagination-text").find("span").text(r+1),o.animateSlideEntrance(r,function(){o.$root.css("background-image","url("+a.find(".bg > img").attr("src")+")")})}))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.autoTimer&&window.clearInterval(this.autoTimer)},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/contact/contactMap",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._el=e,this.log("ContactMap : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){this.log("ContactMap : init"),this.$root.css("height",this.$window.height()-$(".header-nav").height()),this.$root.css("background-position",this.$root.width()/2-70+"px "+(this.$root.height()/2-114)+"px, center"),this.makeMap()},e.prototype.makeMap=function(){var t,e,o,i,n,a;this.log("ContactMap : makeMap"),t={zoom:15,mapTypeId:"firstborn",streetViewControl:!1,draggable:!0,disableDefaultUI:!0,zoomControl:!1,scrollwheel:!1},e=[{featureType:"water",stylers:[{hue:"#00d4ff"},{saturation:-35},{color:"#080908"}]},{featureType:"administrative",elementType:"geometry",stylers:[{saturation:-100},{visibility:"off"}]},{stylers:[{visibility:"on"},{gamma:1.33}]},{featureType:"poi",stylers:[{visibility:"simplified"}]},{},{featureType:"road",stylers:[{visibility:"simplified"},{saturation:-33},{color:"#ffffff"}]},{},{featureType:"road",elementType:"labels.text.fill",stylers:[{visibility:"on"},{saturation:-9},{color:"#aaa8a7"}]},{featureType:"administrative.neighborhood",stylers:[{lightness:30},{visibility:"on"},{saturation:-100}]},{featureType:"administrative.locality",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{color:"#e0e0e0"}]},{},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"transit.line",stylers:[{color:"#808080"},{lightness:-61}]},{featureType:"transit",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"labels.icon",stylers:[{visibility:"simplified"},{saturation:-100},{lightness:32}]},{},{featureType:"road",stylers:[{weight:1.6},{color:"#dddddd"}]},{featureType:"landscape.man_made",stylers:[{color:"#ffffff"}]},{},{featureType:"water",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8d8c8c"}]},{featureType:"road.highway",stylers:[{visibility:"off"}]},{}],o=new google.maps.StyledMapType(e,{name:"firstborn"}),i=new google.maps.Geocoder,n=this,i.geocode({address:"32 Avenue of the Americas New York, NY 10013"},function(e,i){n.locationPt=i===google.maps.GeocoderStatus.OK?e[0].geometry.location:new google.maps.LatLng(40.718521,-74.005249),a=new google.maps.Map(n.$root[0],t),a.setCenter(n.locationPt),a.mapTypes.set("map_style",o),a.setMapTypeId("map_style"),n.marker=new google.maps.Marker({position:n.locationPt,map:a,title:"",icon:"/assets/images/widget/map/marker.png"}),n.map=a,n.bindWindowResize()})},e.prototype.bindWindowResize=function(){this.bindWindowEvent("resize",this.onWindowResize)},e.prototype.onWindowResize=function(t,e,o){var i=this;this.resizeTimer&&window.clearTimeout(this.resizeTimer),this.resizeTimer=window.setTimeout(function(){return i.windowResizeHandler(o)},100)},e.prototype.windowResizeHandler=function(t){this.$root.css("height",t-$(".header-nav").height()),this.map.setCenter(this.locationPt||new google.maps.LatLng(40.72009,-74.0048329))},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/contact/contactButton",["require","exports","core/factory","core/base"],function(t,e,o,i){var n=function(t){function e(e){t.call(this,e),this._el=e,this.log("ContactButton : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("ContactButton : init"),t.Factory=o.Factory,t.$header=t.$root.closest(".header-nav"),t.hasMap=!1,t.originalHeight=0,t.firstScroll=!0,window.location.href.indexOf("/contact")>=0&&t.$root.closest(".header-nav__list-item").addClass("is-active"),t.bindClick()},e.prototype.bindClick=function(){var t=this;$(".footer-links__item.is-contact").unbind().on("click",function(e){return t.onClickEvent(e,!0)}),this.$root.on("click",function(e){return t.onClickEvent(e)})},e.prototype.onClickEvent=function(t,e){t.preventDefault(),t.stopPropagation();var o=this;return window.location.href.indexOf("/contact")>=0?void o.$root.closest(".header-nav__list-item").addClass("is-active"):(o.PushState.abort(),void((o.$map||!o.$root.closest(".header-nav__list-item").hasClass("is-active"))&&(o.$map&&o.$map.length?o.hasMap?o.hideMap():(o.showMap(),e?o.Analytics.track("button","click","Contact (footer nav)",!0):o.Analytics.track("button","click","Contact (header nav)",!0)):(o.loadContactPage(),e?o.Analytics.track("button","click","Contact (footer nav)",!0):o.Analytics.track("button","click","Contact (header nav)",!0)))))},e.prototype.loadContactPage=function(){var t,e=this,o=$("#loading");o.width("0%").text("").show(),setTimeout(function(){"100%"!==$("#loading").css("width")&&o.width(Math.floor(20*Math.random())+1+"%")},50),t=$.ajax({cache:!1,url:"/contact",error:function(){o.css("right","0%").fadeOut()},success:function(t){return e.onLoadSuccess(t)}})},e.prototype.onLoadSuccess=function(t){var e,o,i=this;$("#loading").width("100%").fadeOut(500,function(){$("#loading").width("0%")}),e=$("<div></div>"),e.html(t),o='<div class="contact-overlay"><a href="#" data-push="ignore" class="close-button">Close<div class="close-button__hover"></div></a>'+e.find(".contact-container").parent().html()+"</div>",i.$map=$(o),i.bindWindowEvent("resize",i.onWindowResize),setTimeout(function(){i.$header.before(i.$map),i.$header.unbind().on("click touch touchmove",function(){return i.hideMap()}),i.showMap(),i.Kiu.onPageInit()},50)},e.prototype.showMap=function(){var t=this;t.$header.addClass("has-map"),t.originalHeight=t.$window.height(),t.bindClose(),t.$map.css("height","0px").animate({height:t.originalHeight},400,function(){t.hasMap=!0}),t.$header.addClass("no-transition").animate({top:t.originalHeight-t.$header.height()+"px"},400),t.$header.find(".header-nav__list-item.is-active").removeClass("is-active").addClass("was-active"),t.$root.closest(".header-nav__list-item").addClass("is-active"),t.Factory.refresh("contact-map"),t.Factory.refresh("contact-info"),t.$map.on("mousewheel DOMMouseScroll",function(e){return t.MouseWheelHandler(e)})},e.prototype.bindClose=function(){var t=this;this.$map.find(".close-button").unbind().on("click",function(e){return t.onCloseClick(e)})},e.prototype.onCloseClick=function(t){t&&t.preventDefault&&t.preventDefault(),this.hideMap()},e.prototype.MouseWheelHandler=function(){return!1},e.prototype.hideMap=function(){var t=this;t.$header.find(".header-nav__list-item.was-active").removeClass("was-active").addClass("is-active"),t.$root.closest(".header-nav__list-item").removeClass("is-active"),t.hasMap=!1,t.$map.animate({height:0},400),t.$header.addClass("no-transition").animate({top:0},400,function(){t.$header.removeClass("no-transition has-map")})},e.prototype.onWindowResize=function(t,e,o){this.hasMap&&(this.$map.height(this.originalHeight=o),this.$header.css("top",o-this.$header.height()+"px"))},e.prototype.onWindowScroll=function(){this.hasMap&&this.hideMap()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.$map.unbind()},e}(i.Widget);return n}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/ui/collapseNav",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._el=e,this.log("CollapseNav : Constructor"),this.$root.data("fb-widget",this),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("CollapseNav : init"),t.threshold=parseInt(t.$root.attr("data-collapse-thresh"),10)||100,t.isMobile=/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent),t.hasIntro=t.$root.attr("data-collapse-intro")?"true"===t.$root.attr("data-collapse-intro")?!0:!1:!0,t.bindScroll(),t.hasIntro===!0&&(t.$root.hide(),t.Walt.animate({el:t.$root.show(),animation:"slideInDown",duration:"0.5s",delay:"150ms"}))},e.prototype.bindScroll=function(){this.bindWindowEvent("scroll",this.toggleSize)},e.prototype.toggleSize=function(t,e){var o,i=this;return i.isMobile||1024>e||i.$root.hasClass("has-map")?void i.$root.removeClass("is-small"):(o=i.$root.hasClass("is-small"),void(t>i.threshold&&!o?i.$root.addClass("is-small"):t<i.threshold&&o&&i.$root.removeClass("is-small")))},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/ui/dropdown",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("Dropdown : init"),t.defaultLabel=t.$root.find(".dropdown-label").html(),t.widgetDataType=t.$root.attr("data-widget-data")||"none - need data-widget-data",t.markFirst(),"ontouchstart"in window||t.$html.hasClass("ie-mobile")?((/Android|Silk/.test(navigator.userAgent)||t.$html.hasClass("ie-mobile"))&&t.$root.addClass("is-android"),t.$root.css({"max-height":t.$root.outerHeight()}),t.buildDefault(),t.bindOnTouch()):(t.bindMouseLeave(),t.bindOnClick())},e.prototype.resetMenu=function(){this.$root.removeClass("is-changed").find(".dropdown-label").html(this.defaultLabel)},e.prototype.buildDefault=function(){var t,e,o=this;o.$fallback=$('<select class="fallback-menu"></select>'),o.$root.find(".dropdown-item").each(function(i,n){t=$(n),e=$('<option value="'+t.attr("data-widget-data")+'">'+t.text()+"</option>"),o.$fallback.append(e)}),/Android|Silk/.test(navigator.userAgent)||o.$html.hasClass("ie-mobile")||o.$root.append($('<div class="fallback-cover"></div>')),o.$root.append(o.$fallback.css({"z-index":/Android|Silk/.test(navigator.userAgent)||o.$html.hasClass("ie-mobile")?1e3:1})),o.bindFallbackChange()},e.prototype.bindFallbackChange=function(){var t=this;this.$fallback.on("change",function(e){return t.onFallbackChange(e)})},e.prototype.onFallbackChange=function(t){var e,o=this;o.$fallback.blur(),e=$(t.currentTarget).find(":selected"),e.parent().find(".is-active").removeClass("is-active"),"all"===e.text().toLowerCase()?(o.$root.removeClass("is-changed"),o.$root.find(".dropdown-label").html(o.defaultLabel)):(o.$root.addClass("is-changed"),o.$root.find(".dropdown-label").html(e.text())),o.emit("click",{event:t,target:t.currentTarget,name:o.widgetDataType,textValue:e.text(),value:e.attr("value")}),o.Analytics.track("button","click","Dropdown - "+o.widgetDataType+" - "+e.text(),!0)},e.prototype.bindOnTouch=function(){var t=this;this.$root.on("click",function(e){return t.onTouchStart(e)})},e.prototype.onTouchStart=function(t){return t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),/Android|Silk/.test(navigator.userAgent)?this.$fallback.mousedown():this.$fallback.focus(),!1},e.prototype.bindMouseLeave=function(){var t=this;this.$root.on("mouseleave",function(e){return t.onMouseLeave(e)})},e.prototype.onMouseLeave=function(){var t=this;t.$root.scrollTop()<=0&&t.$root.scrollTop(1),t.$root.css("pointer-events","none").animate({scrollTop:0},500,function(){t.$root.css("pointer-events","all")})},e.prototype.reset=function(t){var e=this;e.resetMenu(),t||e.emit("click",{event:null,target:e.$root.find(".dropdown-label")[0],name:e.widgetDataType,textValue:"All",value:"all"})},e.prototype.bindOnClick=function(){var t=this;this.$root.find(".dropdown-item").unbind().on("click",function(e){return t.onClickHandler(e)})},e.prototype.onClickHandler=function(t){t.preventDefault();var e=this,o=$(t.currentTarget);o.parent().find(".is-active").removeClass("is-active"),o.addClass("is-active"),"all"===o.attr("data-widget-data")?e.resetMenu():e.$root.addClass("is-changed").find(".dropdown-label").html(o.html()),e.$root.blur(),e.$root.find("*").blur(),e.onMouseLeave(),e.emit("click",{event:t,target:t.currentTarget,name:e.widgetDataType,textValue:o.text(),value:o.attr("data-widget-data")}),e.Analytics.track("button","click","Dropdown - "+e.widgetDataType+" - "+o.text(),!0)},e.prototype.markFirst=function(){this.$root.find(".dropdown-item").first().addClass("first")},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/ui/vimeoPlayer",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._el=e,this.log("VimeoPlayer : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;this.log("VimeoPlayer : init"),this.vimeoID=this.$root.attr("data-vimeo-id")||"63058513",this.$root.on("click touch",function(e){return t.onClickEvent(e)})},e.prototype.bindClose=function(){var t=this;this.$overlay.find(".close-button").unbind().on("click touch",function(e){return t.onCloseEvent(e)}),this.$overlay.unbind().on("click touch",function(e){return t.onCloseEvent(e)})},e.prototype.onCloseEvent=function(t){t&&t.preventDefault&&t.preventDefault(),this.$overlay.hide().unbind().find("*").unbind(),this.$overlay.remove(),this.$body.css("overflow","visible"),delete this.$overlay},e.prototype.onClickEvent=function(t){var e,o,i;t.preventDefault(),e=this,e.$overlay&&e.$overlay.length?e.$overlay.is(":visible")?e.onCloseEvent():(setTimeout(function(){e.$body.css("overflow","hidden")},100),e.$overlay.show()):(o=e.$root.attr("data-vimeo-title")||"",o=o.replace(/<br>/gi," ").replace(/<br >/gi," ").replace(/<br \/>/gi," ").replace(/(<([^>]+)>)/gi,""),"63058513"===e.vimeoID&&(o="Error finding video."),e.$overlay=$('<div class="vimeo-overlay"><div class="iframe-container" style="height: 0px;" data-kiu="keep-proportions" data-proportions-desktop="1280:720" data-proportions-tablet="1280:720" data-proportions-mobile="auto"><a href="#" data-push="ignore" class="close-button">Close<div class="close-button__hover"></div></a><iframe src="//player.vimeo.com/video/'+e.vimeoID+"?autoplay="+(navigator.userAgent.indexOf("Android")>-1?"0":"1")+"&amp;hd="+(/iPhone|iPod|Android|BlackBerry/.test(navigator.userAgent)?"0":"1")+'&amp;title=0&amp;color=ee2024&amp;byline=0&amp;portrait=0" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div></div>'),$(document.body).prepend(e.$overlay.hide()),i=e.$overlay.find(".close-button"),i.hide(),e.Walt.animate({el:e.$overlay.show().find(".close-button").show(),animation:"slideInDown",duration:"0.3s",onComplete:function(){e.$body.css("overflow","hidden")}}),e.Kiu.updateLists(),e.bindClose())},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.$body.css("overflow","visible")},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/ui/parallax",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._el=e;var o=this;o.log("Parallax : Constructor"),o.$root.data("fb-widget",this),o.isMobile=/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent),o.isMobile||o.$html.hasClass("ie")||o.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("Parallax : init"),t.percent=0,t.MIN=parseInt(t.$root.attr("data-parallax-min"),10)||0,t.MAX=parseInt(t.$root.attr("data-parallax-max"),10)||100,t.UNIT=t.$root.attr("data-parallax-unit")||"px",t.ATTR=t.$root.attr("data-parallax-attr")||"background-position",t.CUSTOM_ATTR="background-position"===t.ATTR?!1:!0,t.OFFSET=t.$root.offset().top,t.newPos=0,t.isMobile||t.bindWindowEvent("scroll",t.onScrollEvent)},e.prototype.onScrollEvent=function(t,e,o){var i=this,n=t+o,a=t-o,r=i.OFFSET+i.$root.outerHeight()-113;n<i.OFFSET||a>r||(i.percent=t/r,i.percent<=0&&(i.percent=0),i.percent>=1&&(i.percent=1),i.newPos=-1*(i.percent*i.MAX+i.MIN),i.CUSTOM_ATTR?i.$root.css(i.ATTR,i.newPos+i.UNIT):i.$root.css("background-position","center "+i.newPos+i.UNIT))},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/work/projectTitle",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._el=e,this.log("ProjectTitle : Constructor"),this.isMobile=/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent),this.isMobile||this.$html.hasClass("ie")||this.init()}return __extends(e,t),e.prototype.init=function(){this.log("ProjectTitle : init"),this.threshold=parseInt(this.$root.attr("data-title-offset"),10)||100,$(".project-title").remove(),this.$el=$('<div class="project-title">'+this.$root.html()+"</div>"),$(".work-pages__pagination-back").after(this.$el.hide()),this.isThere=!1,this.bindWindow()},e.prototype.onWindowScroll=function(t){if(!this.isMobile){var e=this;t>=e.threshold&&!e.isThere?(e.$el.fadeIn(300),e.isThere=!0):t<e.threshold&&e.isThere&&e.$el.fadeOut(300,function(){e.isThere=!1})}},e.prototype.bindWindow=function(){this.bindWindowEvent("scroll",this.onWindowScroll)},e.prototype.dispose=function(){t.prototype.dispose.call(this),$(".project-title").empty().unbind().remove()},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("mobile/accordion",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._el=e,this.log("AccordionMenu : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("AccordionMenu : init"),t.$container=t.$root.closest('[data-widget-container*="mobile-accordion"]'),t.isMobile=/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent),t.bindTouch(),t.bindWindowEvent("resize",t.onWindowResize)},e.prototype.onWindowResize=function(t,e){e>640&&this.$root.hasClass("is-open")&&(this.$root.removeClass("is-open is-animating"),this.$root.attr("style",this.$root.attr("style").replace(/height:.*?;/g,"")))},e.prototype.bindTouch=function(){var t=this;this.$root.unbind().on("click",function(e){return t.onTouchEvent(e)})},e.prototype.onTouchEvent=function(t){var e=this;t&&t.preventDefault&&t.preventDefault(),e.$window.width()>1020||e.$root.closest('[data-widget-container="mobile-accordion"]').find('[class*="walt-"]').length||(e.$root.hasClass("is-open")?e.closeAccordion():e.openAccordion())},e.prototype.openAccordion=function(){var t,e,o,i,n=this;n.$root.hasClass("is-animating")||n.$root.closest('[data-widget-container="mobile-accordion"]').find('[class*="walt-"]').length||n.$root.find(".is-animating").length||(t=n.$root.find(".has-animate"),e=t.length,"undefined"==typeof n.$root.attr("data-og-height")&&n.$root.attr("data-og-height",n.$root.height()),"undefined"==typeof n.$root.attr("data-expanded-height")&&(o=n.$root.clone(!1),n.$root.after(o),o.addClass("is-open").find(".has-animate").show(),n.$root.attr("data-expanded-height",o.height()),o.remove()),n.$root.addClass("is-animating").animate({height:parseInt(n.$root.attr("data-expanded-height")||"auto",10)},150*e),i=0,n.$root.addClass("is-open").find(".has-animate").each(function(t,o){n.Walt.animate({el:$(o).show().css("visibility","visible"),animation:"fadeInUp",duration:"0.3s",delay:.1*t+"s",onComplete:function(){i++,i===e-1&&n.$root.removeClass("is-animating")}})}),$("html, body").animate({scrollTop:n.$root.offset().top-50},500))},e.prototype.closeAccordion=function(){var t,e,o,i=this;i.$root.closest('[data-widget-container="mobile-accordion"]').find('[class*="walt-"]').length||(t=i.$root.find(".has-animate"),e=t.length,o=0,i.$root.addClass("is-animating").animate({height:parseInt(i.$root.attr("data-og-height")||"77",10)},150*e),t.each(function(n,a){i.Walt.animate({el:$(a).show(),animation:"fadeOutDown",duration:"0.15s",delay:.05*n+"s",onComplete:function(n){n.css("visibility","hidden"),o++,(o===e-1||1===o&&1===e)&&(t.css("visibility","visible").hide(),i.$root.removeClass("is-open is-animating"))}})}))},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/work/textsearch",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._el=e,this.log("TextSearch : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("TextSearch : init"),t.SPEED_THROTTLE=t.$root.attr("data-text-speed")?parseInt(t.$root.attr("data-text-speed"),10):250,t.CHARACTER_THROTTLE=t.$root.attr("data-text-characters")?parseInt(t.$root.attr("data-text-characters"),10):250,t.bindClick(),t.bindField()},e.prototype.isMobile=function(){return/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent)||this.$window.width()<640},e.prototype.setText=function(t){this.$root.find(".search-text").val(decodeURIComponent(t)),this.changeText()},e.prototype.bindClick=function(){var t=this;this.$root.find(".search-submit").unbind().on("click touch",function(e){return t.submitText(e)}),this.$root.unbind().on("onsubmit submit",function(){return t.submitText()})},e.prototype.bindField=function(){var t=this;this.$root.find(".search-text").unbind().on("keyup",function(e){return t.handleKeyUp(e)})},e.prototype.handleKeyUp=function(t){var e=this;return 13===t.keyCode?void e.submitText():27===t.keyCode?(e.$root.find(".search-text").val(""),void e.submitText()):void(37!==t.keyCode&&38!==t.keyCode&&39!==t.keyCode&&40!==t.keyCode&&(e.throttleTimer&&window.clearTimeout(e.throttleTimer),e.throttleTimer=window.setTimeout(function(){return window.clearTimeout(e.throttleTimer),e.throttledKeyUp(t)},e.SPEED_THROTTLE)))},e.prototype.throttledKeyUp=function(){this.changeText()},e.prototype.changeText=function(){this.onEvents("change",{value:this.$root.find(".search-text").val()})},e.prototype.submitText=function(t){var e,o;return t&&t.preventDefault&&t.preventDefault(),e=this,o=e.$root.find(".search-text").val(),o.length<e.CHARACTER_THROTTLE||0===o.length?void 0:(e.$root.blur(),e.onEvents("submit",{value:o}),!1)},e.prototype.reset=function(){this.setText("")},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/index/index",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._root=e,this.log("GlobalIndex : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t,e=this;e.log("GlobalIndex : init"),e.$careersEl=e.$root.find(".featured-careers__list"),e.$arrow=e.$root.find(".index__down-arrow"),e.isMobile="ontouchstart"in window||/iPhone|iPod|Android|BlackBerry/.test(navigator.userAgent),e.bindDownArrow(),e.bindWindow(),t=e.$window.width(),640>t?e.$root.css("background-position","center "+($(".featured-careers__list.half").offset().top-50)+"px"):t>640&&1024>=t?e.$root.css("background-position","center "+($(".featured-careers__list.half").offset().top-71)+"px"):e.$root.css("background-position","center "+($(".featured-careers__list.half").offset().top-71)+"px")},e.prototype.bindDownArrow=function(){var t=this;this.$arrow.unbind().on("click",function(e){return t.downArrowClick(e)})},e.prototype.downArrowClick=function(t){t.preventDefault(),this.Analytics.track("button","click","Homepage - Arrow Down",!0),$("html, body").animate({scrollTop:$(t.currentTarget).offset().top+25},750)},e.prototype.bindWindow=function(){this.bindWindowEvent("resize",this.onWindowResize),this.isMobile||"ontouchstart"in window||this.bindWindowEvent("scroll",this.onWindowScroll)},e.prototype.onWindowResize=function(t,e){640>e?this.$root.css("background-position","center "+($(".featured-careers__list.half").offset().top-50)+"px"):e>640&&1024>=e?this.$root.css("background-position","center "+($(".featured-careers__list.half").offset().top-72)+"px"):this.$root.css("background-position","center "+($(".featured-careers__list.half").offset().top-71)+"px")},e.prototype.onWindowScroll=function(t,e,o){t>o/4?this.$arrow.fadeOut():this.$arrow.fadeIn()},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/news/filter",["require","exports","core/base","core/factory"],function(t,e,o,i){var n=function(t){function e(e){t.call(this,e),this._root=e,this.log("NewsFilter : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.Factory=i.Factory,t.searchParams={category:"all",year:"all"},t.CACHE={},t.bindDropdowns(),t.getFiltersOnLoad()},e.prototype.getFiltersOnLoad=function(){var t,e,o,i,n,a,r=this;for(r.log("NewsFilter : getFiltersOnLoad"),t=window.location.href,t=t.replace(window.location.protocol+"//",""),t=t.replace(window.location.host+"/news/",""),e=t.split("/"),o={},i=0;i<e.length;i+=2)n=e[i],o[n]=e[i+1];for(a in o)o.hasOwnProperty(a)&&"all"!==o[a]&&r.$root.find('[data-widget-data="'+a+'"]').find('[data-widget-data="'+o[a]+'"]').click()},e.prototype.onDropdownClick=function(t){var e=this;e.log("NewsFilter : onDropdownClick",t),t&&e.searchParams.hasOwnProperty(t.name)&&(e.searchParams[t.name]=t.value),e.updateFilters()},e.prototype.updateFilters=function(){var t,e=this,o="",i=window.location.protocol+"//"+window.location.host+"/news";"all"!==e.searchParams.year&&(o+="/year/"+e.searchParams.year),i+=o,i!==window.location.href&&(e.request&&e.request.abort&&e.request.abort(),t=i.replace(window.location.host,"").replace(window.location.protocol+"//",""),""===t&&(t=i),window.hasOwnProperty("fb_push_state")&&window.history.pushState?(window.history.pushState({url:t},"",t),window.fb_push_state.addHistory(t)):window.location.href=i,e.CACHE.hasOwnProperty(encodeURIComponent(i))?e.pageLoad(e.CACHE[encodeURIComponent(i)]):e.request=$.ajax({url:i,dataType:"json"}).error(function(){}).success(function(t){return e.pageLoad(t)}),e.log("NewsFilter : updateFilters",o))},e.prototype.pageLoad=function(t){var e,o,i,n,a,r,s,l,d,c,u=this;if(t){for($("html, body").animate({scrollTop:0},300),u.CACHE[encodeURIComponent(window.location.href)]=t,e=u.$body.find('[data-template="news-item"]').html(),o=u.$body.attr("data-assets-url")||"/assets/images/uploads/",i={DATE:function(t){return moment?new moment(t.date).format("MMMM D, YYYY"):""},CATEGORY:function(t){return t.category&&t.category.title?t.category.title:t.category?t.category:""},"ARTICLE-ID":"id","ARTICLE-TITLE":"title",ASSET:function(t){return t.asset&&t.asset.url?o+t.asset.url:t.publisher&&t.publisher.asset?o+(t.publisher.asset.url||""):""},"ARTICLE-LINK":function(t){return t.slug?"/news/"+t.id+"/"+t.slug:t.link},"LINK-CAPTION":function(t){return t.slug?"Check It Out":"View Article"},"ARTICLE-TYPE":function(t){return t.slug?"internal":"external"}},n="",s=0;s<t.articles.data.length;s++){a=e,r=t.articles.data[s];for(l in i)i.hasOwnProperty(l)&&(d=typeof i[l],"string"===d?a=a.replace(new RegExp("%%"+l+"%%","g"),r[i[l]]):"function"===d&&(a=a.replace(new RegExp("%%"+l+"%%","g"),i[l](r))));n+=a}c=$(".news-list"),u.Walt.animate({el:c,animation:"fadeOut",duration:"0.5s",onComplete:function(){c.empty().append(n),u.Kiu.updateLists(),u.PushState.bindLinks(),u.Factory.refresh(c)}})}},e.prototype.bindDropdowns=function(){var t,e,o=this;this.$root.find('[data-widget="dropdown"]').each(function(i,n){t=$(n),e=t.data("fb-widget"),e&&e.on("click",function(t){return o.onDropdownClick(t)})})},e}(o.Widget);return n}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/awards/filter",["require","exports","core/base","core/factory"],function(t,e,o,i){var n=function(t){function e(e){t.call(this,e),this._root=e,this.log("AwardsFilter : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("AwardsFilter : init"),t.Factory=i.Factory,t.gettingFilters=!1,t.searchParams={client:"all",year:"all",award:"all"},t.CACHE={},t.bindDropdowns(),t.getFiltersOnLoad(),$(".work-filter__error-reset").unbind().on("click",function(e){return t.onClearClick(e)})},e.prototype.onClearClick=function(t){t&&t.preventDefault&&t.preventDefault();var e;$('[data-widget="dropdown"],[data-widget="text-search"]').each(function(t,o){e=$(o),e.data("fb-widget")&&e.data("fb-widget").reset&&e.data("fb-widget").reset(!0)}),this.searchParams={client:"all",year:"all",award:"all"},this.updateFilters(!0)},e.prototype.getFiltersOnLoad=function(){var t,e,o,i,n,a=this;for(a.log("AwardsFilter : getFiltersOnLoad"),a.gettingFilters=!0,t=window.location.href,t=t.replace(window.location.protocol+"//",""),t=t.replace(window.location.host+"/about/awards/",""),t=t.split("/"),e={},i=0;i<t.length;i+=2)o=t[i],e[o]=t[i+1];for(n in e)e.hasOwnProperty(n)&&"all"!==e[n]&&a.$root.find('[data-widget-data="'+n+'"]').find('[data-widget-data="'+e[n]+'"]').click();a.gettingFilters=!1},e.prototype.onDropdownClick=function(t){var e=this;e.log("AwardsFilter : onDropdownClick",t),t&&e.searchParams.hasOwnProperty(t.name)&&(e.searchParams[t.name]=t.value),e.gettingFilters||e.updateFilters()},e.prototype.updateFilters=function(t){var e,o="",i=window.location.protocol+"//"+window.location.host+"/about/awards",n=this;"all"!==n.searchParams.client&&(o+="/client/"+n.searchParams.client),"all"!==n.searchParams.year&&(o+="/year/"+n.searchParams.year),"all"!==n.searchParams.award&&(o+="/award/"+n.searchParams.award),(t||window.location.href.replace(i,"")!==o)&&(i+=o,n.request&&n.request.abort&&n.request.abort(),e=i.replace(window.location.host,"").replace(window.location.protocol+"//",""),""===e&&(e=i),window.history&&window.history.pushState&&window.history.pushState({url:e},"",e),n.CACHE.hasOwnProperty(encodeURIComponent(i))?n.pageLoad(n.CACHE[encodeURIComponent(i)]):n.request=$.ajax({url:"/about/awards"+o,dataType:"json"}).error(function(){n.Walt.animate({el:$(".awards-search__results"),animation:"fadeOut",duration:"0.5s",onComplete:function(){$(".awards-search__results").empty().append($('[data-template="filter-error"]').html()),setTimeout(function(){$(".work-filter__error-reset").unbind().on("click",function(t){return n.onClearClick(t)
})},25)}})}).success(function(t){return n.pageLoad(t)}),n.log("AwardsFilter : updateFilters",o))},e.prototype.pageLoad=function(t){var e,o,i,n,a,r,s,l,d,c=this;if(t){if(t.awards&&t.awards.length<=0)return $(".awards-search__results").empty().append($('[data-template="filter-error"]').html()),void setTimeout(function(){$(".work-filter__error-reset").unbind().on("click",function(t){return c.onClearClick(t)})},25);for(c.CACHE[encodeURIComponent(window.location.href)]=t,e=c.$body.find('[data-template="about-award"]').html(),o=c.$body.attr("data-assets-url")||"/assets/images/uploads/",i={ID:"project_id",TITLE:"title",SUBTITLE:"subtitle",ASSET:function(t){return o+t.asset_url},CLIENT:"client_title","PROJECT-TITLE":"project_title"},n="",a=0;a<t.awards.length;a++){r=e,s=t.awards[a];for(l in i)i.hasOwnProperty(l)&&(d=typeof i[l],"string"===d?r=r.replace(new RegExp("%%"+l+"%%","g"),s[i[l]]):"function"===d&&(r=r.replace(new RegExp("%%"+l+"%%","g"),i[l](s))));n+=r}c.Walt.animate({el:$(".awards-search__results"),animation:"fadeOut",duration:"0.5s",onComplete:function(){var t,e=$(".awards-search__results");e.empty().append(n),t=e.find(".awards-search__results-item").hide(),t.each(function(t,e){c.Walt.animate({el:$(e).show(),animation:"fadeInUp",duration:"0.2s",delay:.05*t+"s"})}),c.PushState.bindLinks(),c.Factory.refresh(e),c.Analytics.refresh()}})}},e.prototype.bindDropdowns=function(){var t,e,o=this;this.$root.find('[data-widget="dropdown"]').each(function(i,n){t=$(n),e=t.data("fb-widget"),e&&e.on("click",function(t){return o.onDropdownClick(t)})})},e}(o.Widget);e.AwardsFilter=n}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/work/filter",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._root=e;var o=this;window.location.href.indexOf("work/list")<0||(o.log("WorkFilter : Constructor"),o.$workList=$(".work-content-area"),""!==window.location.hash&&window.location.hash.indexOf(":")>0&&(o.$workList.hide(),o.$workList.first().show(),$(".year-separator").hide()),o.init())}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("WorkFilter : init"),t.$searchResults=$(".work-search__results > .work-list"),t.$textSearch=t.$root.find(".search-text"),t.$clearButton=t.$root.find(".work-subnav__filters-clear"),t.isMobile=/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent),t.RESULTS={text:[],client:[],industry:[],tags:[]},t.SEARCH={text:"",client:"",industry:"",tags:""},t.RESULTS_HAS_INPUT={text:!1,client:!1,industry:!1,tags:!1},t.getData(),t.bindMobilePagination(),t.bindFilters(),t.bindTextSearch()},e.prototype.bindMobilePagination=function(){var t,e=this;this.log("WorkFilter : bindMobilePagination"),t=$(".work-content-area"),t.unbind().on("click",function(t){return e.onYearClick(t)})},e.prototype.onYearClick=function(t){if(!($(t.target).attr("href")||!this.isMobile&&this.$window.width()>1024)){t&&t.preventDefault&&t.preventDefault();var e=$(t.currentTarget);e.hasClass("is-showing")?e.removeClass("is-showing"):($(".work-content-area.is-showing").removeClass("is-showing"),e.addClass("is-showing"),$("html, body").animate({scrollTop:e.offset().top-50},300),this.Analytics.track("button","click","Project Archive - Year accordion - "+e.text()))}},e.prototype.parseURLvars=function(){var t,e,o,i,n,a,r=this,s=window.location.hash;if(""!==s)for(s=s.slice(1,s.length),e=s.split("/"),i=!1,a=e.length;a>0;--a)o=e[a-1].split(":"),"text"===o[0]?(t=r.$root.find('[data-widget="text-search"]').data("fb-widget"),t.setText(o[1])):(t=r.$root.find("tags"===o[0]?'[data-widget="dropdown"][data-widget-data="tag"]':'[data-widget="dropdown"][data-widget-data="'+o[0]+'"]'),i=!1,t.find("li").each(function(t,e){i||(n=$(e),(n.attr("data-widget-data")===o[1]||encodeURIComponent(n.text().toLowerCase())===o[1])&&(i=!0,n.trigger("click")))}))},e.prototype.bindFilters=function(){var t,e,o=this;this.$root.find('[data-widget="dropdown"]').each(function(i,n){t=$(n),e=t.data("fb-widget"),e&&e.on("click",function(t){return o.onDropdownClick(t)})})},e.prototype.onDropdownClick=function(t){var e=this;"client"===t.name?e.searchFor(t.value,["client_id"]):"industry"===t.name?e.searchFor(t.textValue,["industry"]):"tag"===t.name?e.searchFor(t.textValue,["tags"]):e.searchFor(t.value,[t.name])},e.prototype.bindClearButton=function(){var t=this;this.$clearButton.unbind().on("click",function(e){return t.onClearButton(e)})},e.prototype.onClearButton=function(t){t&&t.preventDefault&&t.preventDefault();var e,o=this;o.Analytics.track("button","click","Project Archive - Clear filters",!0),$('[data-widget="dropdown"],[data-widget="text-search"]').each(function(t,o){e=$(o),e.data("fb-widget")&&e.data("fb-widget").reset&&e.data("fb-widget").reset()}),o.RESULTS={text:[],client:[],industry:[],tags:[]},o.RESULTS_HAS_INPUT={text:!1,client:!1,industry:!1,tags:!1},o.showItems(!0),o.hideClearButton()},e.prototype.showClearButton=function(){this.bindClearButton(),this.$clearButton.fadeIn()},e.prototype.hideClearButton=function(){this.$clearButton.fadeOut()},e.prototype.getData=function(){var t=this;t.request&&t.request.abort&&t.request.abort(),t.request=$.ajax({url:"/work/list",dataType:"json"}).error(function(e,o,i){return t.onDataError(e,o,i)}).success(function(e){return t.onDataSuccess(e)})},e.prototype.onDataError=function(t,e,o){this.log("WorkFilter : onDataError",t,e,o)},e.prototype.onDataSuccess=function(t){var e=this;e.log("WorkFilter : onDataSuccess",t),e.LIST_DATA=t.projectsByYear,e.LIST_COUNT=t.totalProjects,e.modifyData(),e.Walt.animate({el:e.$root.show(),animation:"fadeInDown",duration:"0.5s"}),e.parseURLvars()},e.prototype.modifyData=function(){var t,e,o,i,n,a="",r=this;for(t in r.LIST_DATA)if(r.LIST_DATA.hasOwnProperty(t))for(i=r.LIST_DATA[t],e=i.length;e>0;--e)if(n=i[e-1],n.hasOwnProperty("industry")&&(n.industry=n.industry.title),n.hasOwnProperty("tags")){a="";for(o in n.tags)n.tags.hasOwnProperty(o)&&(a+=n.tags[o].title.toLowerCase()+" ");n.tags=a.slice(0,-1)}},e.prototype.bindTextSearch=function(){var t,e,o=this;o.$root.closest('[data-widget-container*="work-filter"]').find('[data-widget="text-search"]').each(function(i,n){t=$(n),e=t.data("fb-widget"),e&&e.on("change",function(t){return o.onTextChange(t)})})},e.prototype.onTextChange=function(){console.time&&console.time("Text Search"),this.searchFor(this.$textSearch.val()),console.timeEnd&&console.timeEnd("Text Search")},e.prototype.searchFor=function(t,e){var o,i,n,a,r,s,l,d,c,u,h,p,f;if(console.time&&console.time("Searching Projects"),t.trim&&(t=t.trim()),o=this,i=!1,n=[],e&&e.length||(i=!0,e=["description","full_description","title","sub_title","industry","tags"]),!t||""===t||"all"===t.toLowerCase())return console.timeEnd&&console.timeEnd("Searching Projects"),i?(o.RESULTS.text=n,o.RESULTS_HAS_INPUT.text=!1,o.SEARCH.text=""):(a=e[0],"client_id"===a&&(a="client"),o.RESULTS[a]=n,o.RESULTS_HAS_INPUT[a]=!1,o.SEARCH[a]=""),void o.showItems();h=new RegExp(t,"gi"),p=!1;for(r in o.LIST_DATA)if(o.LIST_DATA.hasOwnProperty(r))for(s=o.LIST_DATA[r],d=s.length;d>0;--d)for(l=s[d-1],p=!1,c=e.length;c>0&&!p;--c)u=e[c-1],"client_id"===u||"industry"===u?t===l[u]&&(n.push(l.id),p=!0):"tags"===u?l[u].indexOf(t.toLowerCase())>=0&&(n.push(l.id),p=!0):h.test((l[u]+"").replace(/(<([^>]+)>)/gi,""))&&(n.push(l.id),p=!0);console.timeEnd&&console.timeEnd("Searching Projects"),o.log("Found "+n.length+" items"),i?(o.RESULTS.text=n,o.RESULTS_HAS_INPUT.text=!0,o.SEARCH.text=encodeURIComponent(t.toLowerCase())):(f=e[0],"client_id"===f&&(f="client"),o.RESULTS[f]=n,o.RESULTS_HAS_INPUT[f]=!0,o.SEARCH[f]=encodeURIComponent(t.toLowerCase())),o.showItems()},e.prototype.resetSearch=function(){var t,e,o;console.time&&console.time("Reset Search"),t=this,t.$searchResults.empty().hide(),$(".year-separator").show(),t.Walt.animate({el:t.$workList.show(),animation:"fadeIn",duration:"1s"}),e=window.location.protocol+"//"+window.location.host+"/work/list",o=e.replace(window.location.host,"").replace(window.location.protocol+"//",""),""===o&&(o=e),window.hasOwnProperty("fb_push_state")&&window.history.pushState&&(window.history.pushState({url:o},"",o),window.fb_push_state.addHistory(o)),console.timeEnd&&console.timeEnd("Reset Search")},e.prototype.intersect_safe=function(t,e){for(var o=0,i=0,n=[];o<t.length&&i<e.length;)t[o]<e[i]?o++:t[o]>e[i]?i++:(n.push(t[o]),o++,i++);return n},e.prototype.noResults=function(){var t=this;(!t.$errorTemplate||t.$errorTemplate.length)&&(t.$errorTemplate=$($('[data-template="filter-error"]').html())),t.$errorTemplate.find(".work-filter__error-reset").unbind().on("click",function(e){return t.onClearButton(e)}),t.$workList.hide(),$(".year-separator").hide(),t.$searchResults.empty().append(t.$errorTemplate.addClass("is-showing").fadeIn())},e.prototype.hasSearchFilters=function(){var t=this;return t.RESULTS_HAS_INPUT.text||t.RESULTS_HAS_INPUT.client||t.RESULTS_HAS_INPUT.industry||t.RESULTS_HAS_INPUT.tags},e.prototype.showItems=function(t){var e,o,i,n,a,r,s,l,d,c,u,h,p;console.time&&console.time("Show Items"),e=this,t&&(o=e.$window.scrollTop()>124?124:0,$("html, body").animate({scrollTop:o},300)),n="",d="";for(c in e.RESULTS)e.RESULTS.hasOwnProperty(c)&&e.RESULTS_HAS_INPUT[c]&&(l=l?e.intersect_safe(l,e.RESULTS[c]):e.RESULTS[c]);if(l&&l.length||(l=[]),l.length<=0)if(e.hasSearchFilters()){e.noResults(),r=window.location.protocol+"//"+window.location.host+"/work/list",s=r.replace(window.location.host,"").replace(window.location.protocol+"//",""),""===s&&(s=r),d="";for(u in e.RESULTS)e.RESULTS_HAS_INPUT[u]&&(""!==d&&(d+="/"),d+=u+":"+e.SEARCH[u]);""!==d&&(s+="#"+d),window.hasOwnProperty("fb_push_state")&&window.history.pushState&&(window.history.pushState({url:s},"",s),window.fb_push_state.addHistory(s))}else e.resetSearch();else{for(i=l.length;i>0;--i)n+='.work-list__item[data-id="'+l[i-1]+'"]'+(i-1>0?",":"");a=e.$workList.find(n),a=a.clone(),e.showClearButton(),e.$workList.hide(),$(".year-separator").hide(),a.find("[data-kiu]").attr("data-kiu",null),a.find("[data-kiu-wait]").each(function(t,e){h=$(e),h.attr("data-kiu-wait",null).attr("style",h.attr("data-style"))}),e.Kiu.updateLists(),e.$searchResults.empty().hide().append(a),e.fixShownItems(),e.$searchResults.show().find(".work-list__item").each(function(t,o){h=$(o),h.find("[data-kiu]").attr("data-kiu",null),e.Walt.animate({el:h,animation:"fadeInUp",duration:"0.5s",delay:.1*t+"s"})}),r=window.location.protocol+"//"+window.location.host+"/work/list",s=r.replace(window.location.host,"").replace(window.location.protocol+"//",""),""===s&&(s=r),d="";for(p in e.RESULTS)e.RESULTS_HAS_INPUT[p]&&(""!==d&&(d+="/"),d+=p+":"+e.SEARCH[p]);""!==d&&(s+="#"+d),window.hasOwnProperty("fb_push_state")&&window.history.pushState&&(window.history.pushState({url:s},"",s),window.fb_push_state.addHistory(s)),console.timeEnd&&console.timeEnd("Show Items")}t||(o=e.$window.scrollTop()>124?124:0,$("html, body").animate({scrollTop:o},300))},e.prototype.fixShownItems=function(){console.time&&console.time("Fix Shown Items");var t,e=this;e.$searchResults.find(".work-list__item").each(function(e,o){t=$(o),t.find("a").unbind().attr("data-push",null).attr("data-kiu","scroll-in-view").attr("data-kiu-wait","true").attr("data-kiu-scroll",null),e%4===3?t.addClass("no-margin"):t.removeClass("no-margin")}),e.Kiu.updateLists(),e.PushState.bindLinks(e.$searchResults),console.timeEnd&&console.timeEnd("Fix Shown Items")},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("widgets/page/news/item",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._root=e,this.log("NewsItem : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.lastURL="",t.CACHE={},t.isMobile=/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent),t.bindClick(),t.directoryUrl="/news"},e.prototype.bindClick=function(){var t=this;this.$root.unbind().on("click touch",function(e){return t.onClickEvent(e)})},e.prototype.onClickEvent=function(t){var e,o,i,n,a,r=this;return this.log("NewsItem : onClickEvent"),e=this.$root.find(".news-list__item-link"),o=this,"external"===e.attr("data-type")?(t.preventDefault(),t.stopPropagation(),o.$root.unbind(),e.unbind().attr("target","_blank"),e[0].click(),void o.bindClick()):void(o.$root.hasClass("is-active")||(t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation()),o.$root.removeClass("is-bottom is-fixed"),i=o.$root.find(".news-list__item-title").find("a"),n=i.attr("href"),i.hasClass("is-active")||i.closest(".is-active").length||(o.$root.find(".loading-bar").length||o.$root.prepend('<div class="loading-bar"></div>'),o.request&&o.request.abort&&o.request.abort(),a=n.replace(window.location.host,"").replace(window.location.protocol+"//",""),""===a&&(a=n),o.isMobile||o.$window.width()<=640?$("html, body").animate({scrollTop:o.$root.offset().top-50},300):$("html, body").animate({scrollTop:o.$root.offset().top-$('[data-widget="collapse-nav"]').outerHeight()-70},300),o.CACHE.hasOwnProperty(encodeURIComponent(n))?o.onSuccess(o.CACHE[encodeURIComponent(n)],n,!0):(o.$root.find(".loading-bar").css("width","0%").fadeIn(),setTimeout(function(){var t=40*Math.random();"100%"!==o.$root.find(".loading-bar").css("width")&&o.$root.find(".loading-bar").css("width",t+"%")},50),o.request=$.ajax({url:n,xhrFields:{onprogress:function(t){if("100%"!==o.$root.find(".loading-bar").css("width"))if(t.lengthComputable)o.$root.find(".loading-bar").width(t.loaded/t.total*100+"%");else{var e=o.$root.find(".loading-bar").width();o.$root.find(".loading-bar").width(e+e/2+"%")}}}}).error(function(t,e,o){return r.onError(t,e,o)}).success(function(t){return r.onSuccess(t,n,!1)})))))},e.prototype.onError=function(t,e,o){this.log("NewsItem : onError",t,e,o)},e.prototype.onSuccess=function(t,e,o){var i,n,a,r,s,l,d,c=this,u=t,h=c.$root.find(".loading-bar");h.attr("style",h.attr("style").replace(/width:.*?;/g,"")).css("width","100%"),o||(i=$(document.createElement("div")).append(t),u=i.find(".article-item__content").html(),i.empty().remove(),c.CACHE[encodeURIComponent(e||window.location.href)]=u),n=c.$root,n.attr("style")&&n.attr("style",n.attr("style").replace(/height:.*?;|width:.*?;/g,"")),c.$root.removeClass("is-fixed is-bottom"),c.$root.find(".loading-bar").css("width","100%"),setTimeout(function(){c.$root.find(".loading-bar").fadeOut(1e3,function(){c.$root.find(".loading-bar").css("width","0%")})},750),c.$root.attr("data-original-height")||c.$root.attr("data-original-height",c.$root.height()),c.$root.addClass("is-active"),a=c.$root.find(".expanded-info"),a.empty().append(u).show().css("visibility","hidden"),r=c.$root.height(),c.$root.height(parseInt(c.$root.attr("data-original-height"),10)),c.$root.attr("data-expanded-height")||c.$root.attr("data-expanded-height"),s=r/120*25,200>s&&(s=200),c.$root.attr("data-expanded-speed")||c.$root.attr("data-expanded-speed",s),l=c.buildClose().css("opacity",1),d=parseInt(l.css("top"),10),c.Walt.animate({el:a.css("visibility","visible"),animation:"fadeInUp",duration:s+"ms"}),c.$root.animate({height:r},s),c.Walt.animate({el:c.$root.find(".should-hide"),animation:"fadeOut",duration:s/2+"ms",onComplete:function(t){t.css("visibility","hidden")}}),c.$root.attr("data-top",c.$root.offset().top),c.bindWindow(),l.fadeIn()},e.prototype.onWindowResize=function(){this.$root.attr("data-top",this.$root.offset().top)},e.prototype.onWindowScroll=function(t){if(this.isMobile||!this.$root.hasClass("is-active"))return void this.$root.removeClass("is-fixed is-bottom");var e=parseFloat(this.$root.attr("data-top"));e>=t+106?this.$root.removeClass("is-fixed").removeClass("is-bottom"):t+116>=e+this.$root.height()?this.$root.addClass("is-bottom").removeClass("is-fixed"):this.$root.addClass("is-fixed").removeClass("is-bottom")},e.prototype.buildClose=function(){var t;return(t=this.$root.find(".close-button"))&&t.length?(this.bindClose(t.hide()),t):(t=$('<a href="#" class="close-button">Close</a>'),t.hide().appendTo(this.$root),this.bindClose(t),t)},e.prototype.bindClose=function(t){var e=this;t.unbind().on("click touch",function(t){return e.onCloseEvent(t)})},e.prototype.onCloseEvent=function(t){var e,o,i,n=this;t?(t.preventDefault(),t.stopPropagation(),e=$(t.currentTarget)):e=n.$root.find(".close-button"),n.unbindWindow(),o=parseInt(e.css("top"),10),i=parseInt(n.$root.attr("data-expanded-speed"),10)||500,e.css({opacity:1,top:o}).animate({opacity:0,top:.8*o},250,function(){e.hide().attr("style",e.attr("style").replace(/top:.*?;/g,""))}),n.Walt.animate({el:n.$root.find(".expanded-info"),animation:"fadeOutDown",duration:i+"ms",onComplete:function(t){t.hide()}}),n.$root.animate({height:parseInt(n.$root.attr("data-original-height"),10)},i,function(){n.$root.removeClass("is-active").find(".expanded-info").empty(),n.WindowController.trigger("scroll")}),n.Walt.animate({el:n.$root.find(".should-hide").css("visibility","visibile"),animation:"fadeIn",duration:i/2+"ms",delay:i/2+"ms"}),n.WindowController.trigger("scroll")},e.prototype.bindWindow=function(){this.bindWindowEvent("scroll",this.onWindowScroll),this.bindWindowEvent("resize",this.onWindowResize)},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("mobile/navToggle",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._el=e,this.log("NavToggle : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){this.log("NavToggle : init"),this.$sidebar=$(".header-mobile__list"),this.scrollTop=0,this.bindTouch()},e.prototype.bindTouch=function(){var t=this;t.$root.unbind().on("click",function(e){return t.onMenuEvent(e,!1)}),t.$sidebar.unbind().on("click",function(e){return t.onItemClick(e)}),t.$sidebar.find(".close-button").unbind().on("click",function(e){return t.onMenuEvent(e,!0)})},e.prototype.onItemClick=function(t){var e,o,i,n,a,r=this,s=$(t.target);if(s.hasClass("is-active"))return void(t&&t.preventDefault&&t.preventDefault());if(s.closest(".header-mobile__sub-item").length||!s.closest(".header-mobile__list-item").find(".header-mobile__sub-list").length)return"a"===s[0].tagName.toLowerCase()&&"_blank"!==s.attr("target")&&r.$html.addClass("has-sidebar")?!1:(t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),s.attr("href")&&(window.history&&!window.history.pushState?window.location.href=s.attr("href"):(a=s.unbind().attr("target","_blank").clone(!1),a[0].click())),!0);if(t&&t.preventDefault&&t.preventDefault(),t&&t.stopPropagation&&t.stopPropagation(),e=s.closest(".header-mobile__list-item"),o=e.find(".header-mobile__sub-item"),!e.hasClass("is-active")&&!e.hasClass("is-animating"))return i=o.length,n=0,e.hasClass("is-open")?(o.show(),e.removeClass("is-open")):(o.hide(),e.addClass("is-open").addClass("is-animating"),o.each(function(t,o){r.Walt.animate({el:$(o).show(),animation:"fadeInUp",duration:"0.2s",delay:.05*t+"s",onComplete:function(){n++,n>=i&&e.removeClass("is-animating")}})})),!1},e.prototype.onMenuEvent=function(t,e){t&&t.preventDefault&&t.preventDefault();var o=this;e===!0&&o.$html.hasClass("has-sidebar")?o.Walt.animate({el:o.$sidebar,animation:"fadeOut",duration:"0.5s",onComplete:function(){o.$html.removeClass("has-sidebar"),o.$sidebar.find(".is-open").removeClass("is-open"),o.$sidebar.find(".header-mobile__list-item, .close-button").hide()}}):(o.$html.addClass("has-sidebar"),o.Walt.animate({el:o.$sidebar,animation:"fadeIn",duration:"0.25s",onComplete:function(){o.Walt.animate({el:o.$sidebar.find(".close-button").show(),animation:"slideInRight",duration:"0.5s",delay:"0.1s"})}}),o.$sidebar.find(".header-mobile__list-item, .header-mobile__list-item.is-active li, .header-group").each(function(t,e){o.Walt.animate({el:$(e).show(),animation:"fadeInUp",duration:"0.3s",delay:.05*t+"s"})}))},e.prototype.dispose=function(){this.$root.unbind()},e}(o.Widget);return i}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("mobile/subnavMenu",["require","exports","core/base"],function(t,e,o){var i=function(t){function e(e){t.call(this,e),this._el=e,this.log("SubnavMenu : Constructor"),this.init()}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("SubnavMenu : init"),t.$container=t.$root.closest('[data-widget-container*="mobile-subnav"]'),("ontouchstart"in window||t.$window.width()<640)&&(t.containerHeight=t.$container.height()),t.itemSelector=t.$root.attr("data-subnav-item")||"li",t.moveActiveToTop(),t.bindWindow(),t.$root.find("a").unbind(),t.$container.unbind().on("click",function(e){return t.onContainerClick(e)})},e.prototype.bindWindow=function(){this.bindWindowEvent("resize",this.onWindowResize)},e.prototype.onWindowResize=function(t,e){var o=this;"undefined"==typeof o.containerHeight?640>=e&&(o.containerHeight=o.$container.height()):e>640&&o.$container.hasClass("is-open")&&(o.$container.removeClass("is-open"),o.$container.attr("style")&&o.$container.attr("style",o.$container.attr("style").replace(/height:.*?;/g,"")))},e.prototype.moveActiveToTop=function(){var t,e=this;e.$window.width()<=640&&(t=e.$root.find(e.itemSelector+".is-active"),t.length?t.closest(".half").prepend(t):(t=e.$root.find("a.is-active").closest("li"),e.$root.prepend(t)))},e.prototype.onContainerClick=function(t){var e,o,i=this;i.$window.width()>640||(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e=$(t.target),i.$container.hasClass("is-open")?(o=e.find("a"),o.length&&(o.hasClass("is-active")?i.$container.removeClass("is-open").css("height",i.containerHeight+"px"):i.$html.hasClass("is-android")?window.location.href=o.attr("href"):i.PushState.gotoURL(o.attr("href")))):i.$container.addClass("is-open").css("height",i.containerHeight*i.$root.find(i.itemSelector).length+"px"))},e.prototype.dispose=function(){this.unbindWindow()},e}(o.Widget);return i}),define("core/factory",["require","exports","core/logger","core/kiu","widgets/carousel/giantCarousel","widgets/page/work/exploreCarousel","widgets/page/contact/contactMap","widgets/page/contact/contactButton","widgets/ui/collapseNav","widgets/ui/dropdown","widgets/ui/vimeoPlayer","widgets/ui/parallax","widgets/page/work/projectTitle","mobile/accordion","widgets/page/work/textsearch","widgets/page/index/index","widgets/page/news/filter","widgets/page/awards/filter","widgets/page/work/filter","widgets/page/news/item","mobile/navToggle","mobile/subnavMenu"],function(t,e,o,i,n,a,r,s,l,d,c,u,h,p,f,w,g,m,y,v,b,_){!function(t){function e(t){P("Factory : init"),S=t||document.body,x()}function C(t,e){$(S).find('[data-widget="'+e+'"]').each(function(e,o){var i=$(o);i.length&&!i.data("fb-widget")?t.init?(t.init(i),i.data("fb-widget",t)):i.data("fb-widget",new t(i)):i.length&&i.data("fb-widget")&&i.data("fb-widget")&&i.data("fb-widget").refresh&&i.data("fb-widget").refresh()})}function k(t){t&&"object"!=typeof t?E[t]&&C(E[t],t):t&&"object"!=typeof t||x()}function x(){P("Factory : initWidgets");for(var t in E)E.hasOwnProperty(t)&&k(t);setTimeout(function(){i.onPageInit()},250)}function T(t){P("Factory : removeWidgets");$(t||S).find("[data-widget]").each(function(t,e){var o=$(e),i=o.data("fb-widget");i&&i.dispose&&i.dispose()})}var S,P=o.log,E={"giant-carousel":n,dropdown:d,parallax:u,"text-search":f,"vimeo-player":c,"collapse-nav":l,"project-title":h,"explore-carousel":a,"contact-map":r,"contact-button":s,"news-item":v,"awards-filter":m.AwardsFilter,"work-filter":y,"news-filter":g,"global-index":w,"mobile-navtoggle":b,"mobile-subnav":_,"mobile-accordion":p};P("Factory : Constructor"),t.init=e,t.refresh=k,t.removeWidgets=T}(e.Factory||(e.Factory={}));e.Factory}),__extends=this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);o.prototype=e.prototype,t.prototype=new o},define("app",["require","exports","core/factory","core/base"],function(t,e,o,i){var n=function(t){function e(){t.call(this),this.log("App : Constructor")}return __extends(e,t),e.prototype.init=function(){var t=this;t.log("App : init"),t.disableConsole(),t.checkUserAgent(),t.Analytics.init(),t.Factory=o.Factory,t.Factory.init(),t.WindowController.init(),t.PushState.init(),$(window).load(function(){t.$body.removeClass("is-pageloading")})},e.prototype.checkUserAgent=function(){var t=this.$html,e=(this.$body,t.attr("data-ua")||""),o=function(){var t=window.navigator.userAgent,e=t.indexOf("OS ");return/iP(hone|ad)/gi.test(t)&&e>-1?Number(t.substr(e+3,3).replace("_",".")):0}();o>0&&t.addClass("ios ios"+Math.floor(o)),(/MSIE/i.test(e)||/Trident\/[0-9\.]+/i.test(e)||window.hasOwnProperty("MSStream"))&&(t.addClass("ie"),/IEMobile/i.test(e)&&t.addClass("ie-mobile")),"ontouchstart"in window&&t.addClass("is-touch")},e.prototype.disableConsole=function(){var t="true"===this.$body.attr("data-debug")?!0:!1;t||(console.time=console.timeEnd=function(){})},e}(i.FbObject);return n}),define("main",["require","exports","app"],function(t,e,o){var i=function(){function t(){var t=new o;t.init()}return t}();new i});